<div class="transaction-container">
  <h2>Effectuer une transaction</h2>

  <!-- Formulaire pour effectuer une transaction -->
  <form (ngSubmit)="makeTransaction()">
    <div>
      <label for="compteId">ID du compte source :</label>
      <input
        type="number"
        id="compteId"
        [(ngModel)]="compteId"
        name="compteId"
        required
      />
    </div>

    <div>
      <label for="typeTransaction">Type de transaction :</label>
      <select
        id="typeTransaction"
        [(ngModel)]="typeTransaction"
        name="typeTransaction"
        required
      >
        <option value="CREDIT">Crédit</option>
        <option value="DEBIT">Débit</option>
        <option value="TRANSFERT">Transfert</option>
      </select>
    </div>

    <div>
      <label for="amount">Montant :</label>
      <input
        type="number"
        id="amount"
        [(ngModel)]="amount"
        name="amount"
        required
      />
    </div>

    <div *ngIf="typeTransaction === 'TRANSFERT'">
      <label for="targetCompteId">ID du compte cible :</label>
      <input
        type="number"
        id="targetCompteId"
        [(ngModel)]="targetCompteId"
        name="targetCompteId"
        required
      />
    </div>

    <button type="submit">Effectuer la transaction</button>
  </form>

  <!-- Section pour afficher toutes les transactions -->
  <div class="transactions-section">
    <h3>Toutes les transactions</h3>
    <table>
      <thead>
      <tr>
        <th>ID Transaction</th>
        <th>Montant</th>
        <th>Date</th>
        <th>Type</th>
        <th>ID Compte</th>
        <th>Numéro Compte</th>
        <th>Employé</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let transaction of transactions">
        <td>{{ transaction.idTransaction }}</td>
        <td>{{ transaction.montant }}</td>
        <td>{{ transaction.dateTransaction }}</td>
        <td>{{ transaction.typeTransaction }}</td>
        <td>
          <ul>
            <li *ngFor="let compte of transaction.comptes">
              {{ compte.idCompte }}
            </li>
          </ul>
        </td>
        <td>
          <ul>
            <li *ngFor="let compte of transaction.comptes">
              {{ compte.numeroCompte }}
            </li>
          </ul>
        </td>
        <td>{{ transaction.employee?.idEmployee }}</td>
      </tr>
      </tbody>
    </table>
  </div>

  <!-- Section pour afficher les transactions d'un compte spécifique -->
  <div class="compte-transactions-section">
    <h3>Transactions du compte</h3>
    <div>
      <label for="selectedCompteId">ID du compte :</label>
      <input
        type="number"
        id="selectedCompteId"
        [(ngModel)]="selectedCompteId"
        name="selectedCompteId"
        placeholder="Entrez l'ID du compte"
      />
      <button (click)="loadTransactionsByCompteId()">Charger les transactions</button>
    </div>
    <table>
      <thead>
      <tr>
        <th>ID Transaction</th>
        <th>Montant</th>
        <th>Date</th>
        <th>Type</th>
        <th>ID Compte</th>
        <th>Numéro Compte</th>
        <th>Employé</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let transaction of compteTransactions">
        <td>{{ transaction.idTransaction }}</td>
        <td>{{ transaction.montant }}</td>
        <td>{{ transaction.dateTransaction }}</td>
        <td>{{ transaction.typeTransaction }}</td>
        <td>
          <ul>
            <li *ngFor="let compte of transaction.comptes">
              {{ compte.idCompte }}
            </li>
          </ul>
        </td>
        <td>
          <ul>
            <li *ngFor="let compte of transaction.comptes">
              {{ compte.numeroCompte }}
            </li>
          </ul>
        </td>
        <td>{{ transaction.employee?.idEmployee }}</td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
